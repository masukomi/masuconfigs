#!/bin/sh

# Usage: dgrep <search_term> <2nd search term> <where>
#        or
#        echo "foo bar baz" | dgrep <search_term> <2nd search term>
if [ $# -eq 0 ]; then
	echo "double grep"
	echo ""
	echo "Usage: dgrep <search_term> <2nd search term> [where]"
	echo "       or"
	echo "       cat some-file.txt | dgrep <search_term> <2nd search term>"
	echo "       Where is a path that defaults to the current directory"
	exit 0
fi
if [[ -t 0 ]]; then
	WHERE="*"
	if [[ "$3" != "" ]]; then
		WHERE=$3
	fi
	# grep -rn "$1" $WHERE | grep "$2"
	egrep -rn "$1.*$2|$2.*$1" $WHERE
else
	# read from stdin
	while IFS= read -r line; do
		echo "$line" | egrep "$1.*$2|$2.*$1"
	done
fi
